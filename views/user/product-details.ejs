<%- include("../../views/partials/user/header") %>
<style>
  /* Container for all reviews */
.reviews-section {
  margin-top: 20px;
  padding: 15px;
  background: #f7f7f7;
  border-radius: 8px;
  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
}

.section-title {
  font-size: 24px;
  color: #333;
  text-align: center;
  margin-bottom: 10px;
}

/* Individual review card */
.review-card {
  background-color: #ffffff;
  border-radius: 10px;
  padding: 15px;
  margin-bottom: 15px;
  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.1);
  transition: transform 0.3s ease;
}

.review-card:hover {
  transform: translateY(-5px); /* Slight hover effect */
}

/* Review Header */
.review-header {
  display: flex;
  align-items: center;
  margin-bottom: 10px;
}

.avatar {
  width: 40px;
  height: 40px;
  border-radius: 50%;
  margin-right: 10px;
  object-fit: cover;
}

.user-info {
  display: flex;
  flex-direction: column;
}

.username {
  font-size: 16px;
  font-weight: bold;
  color: #333;
}

.rating {
  display: flex;
  align-items: center;
}

.stars {
  color: #ff9800;
}

.star.filled {
  font-size: 16px;
}

.star.empty {
  font-size: 16px;
  color: #ddd;
}

.review-date {
  font-size: 12px;
  color: #888;
  margin-left: 10px;
}

/* Review text */
.review-text {
  font-size: 14px;
  color: #333;
  margin-top: 10px;
  line-height: 1.4;
}

/* Review Image */
.review-images {
  margin-top: 10px;
}

.review-image {
  width: 100px;
  height: 100px;
  object-fit: cover;
  border-radius: 6px;
  transition: transform 0.2s ease;
}

.review-image:hover {
  transform: scale(1.05); /* Slight zoom effect */
}

</style>

<main class="main">
 <div class="page-header breadcrumb-wrap">
     <div class="container">
         <div class="breadcrumb">
             <a href="#" rel="nofollow">Home</a>
             <span></span> Fashion
             <span></span>product detail page
         </div>
     </div>
 </div>
 <section class="mt-50 mb-50">
     <div class="container">
         <div class="row">
             <div class="col-lg-9">
                 <div class="product-detail accordion-detail">
                     <div class="row mb-50">
                         <div class="col-md-6 col-sm-12 col-xs-12">
                             <div class="detail-gallery">
                                 <span class="zoom-icon"><i class="fi-rs-search"></i></span>
                                 <div class="product-image-slider">
                                     <figure class="border-radius-10">
                                         <img src="/uploads/re-image/<%=product.productImage[0]%>" alt="Product image">
                                     </figure>
                                     <figure class="border-radius-10">
                                       <img src="/uploads/re-image/<%=product.productImage[1]%>" alt="Product image">
                                   </figure>
                                   <figure class="border-radius-10">
                                       <img src="/uploads/re-image/<%=product.productImage[2]%>" alt="Product image">
                                   </figure>
                                   <figure class="border-radius-10">
                                       <img src="/uploads/re-image/<%=product.productImage[3]%>" alt="Product image">
                                   </figure>
                                   <figure class="border-radius-10">
                                       <img src="/uploads/re-image/<%=product.productImage[4]%>" alt="Product image">
                                   </figure>
                                 </div>
                                 <div  class="slider-nav-thumbnails pl-15 pr-15">
                                    <%for(let i=0;i<product.productImage.length;i++){%>
                                       <div>
                                           <img style="object-fit:contain ;" src="/uploads/re-image/<%=product.productImage[i]%>" alt="product image">
                                       </div>
                                  <%}%>
                                 </div>
                             </div>
                         </div>
                         <div class="col-md-6 col-sm-12 col-xs-12">
                             <div class="detail-info">
                                 <h2 class="title-detail"><%=product.productName%></h2>
                                 <div class="product-detail-rating">
                                     <div class="pro-details-brand">
                                         <span> Brands: <a href="#"><%=product.brand%></a></span>
                                     </div>
                                     <div class="product-rate-cover text-end">
                                         <div class="product-rate d-inline-block">
                                             <div class="product-rating" style="width:90%">
                                             </div>
                                         </div>
                                         
                                         <span class="font-small ml-5 text-muted"> (25 reviews)</span>
                                     </div>
                                 </div>
                                 <div class="clearfix product-price-cover">
                                     <div class="product-price primary-color float-left">
                                         <ins><span class="text-brand">₹ <%=product.salePrice%></span></ins>
                                         <ins><span class="old-price font-md ml-15">₹ <%=product.regularPrice%></span></ins>
                                         <span class="save-price  font-md color3 ml-15">
                                            <%if(!totalOffer){%>
                                                No Offers
                                                <%}else{%>
                                                    <%=totalOffer%>% Offer
                                                    <%}%>
                                       </span>
                                     </div>
                                 </div>
                                 <div class="bt-1 border-color-1 mt-15 mb-15"></div>
                                 <div class="short-desc mb-30">
                                     <p><%=product.description%></p>
                                 </div>
                                 <div class="product_sort_info font-xs mb-30">
                                     <ul>
                                         <li class="mb-10"><i class="fi-rs-crown mr-5"></i> 1 Year Brand Warranty</li>
                                         <li class="mb-10"><i class="fi-rs-refresh mr-5"></i> 30 Day Return Policy</li>
                                         <li><i class="fi-rs-credit-card mr-5"></i> Cash on Delivery available</li>
                                     </ul>
                                 </div>
                               
                                 <div class="bt-1 border-color-1 mt-30 mb-30"></div>
                                 <div class="detail-extralink">
                                     <div class="detail-qty border radius">
                                         <a href="#" class="qty-down" onclick="" ><i class="fi-rs-angle-small-down"></i></a>
                                         <span class="qty-val" id="quantity">1</span>
                                         <a href="#" class="qty-up" onclick=""><i class="fi-rs-angle-small-up"></i></a>
                                     </div>
                                     <div class="product-extra-link2">
                                      
                                         <button type="submit" class="button button-add-to-cart" onclick="addToCart('<%=product._id%>')">Add to cart</button>
                                         <button type="submit" class="button button-add-to-cart" onclick="addToWishlist('<%=product._id%>')">Add to Wishlist</button>
                                       
                                         <!--<a aria-label="Add To Wishlist" class="action-btn hover-up" href="#"><i class="fi-rs-heart"></i></a>-->
                                     </div>
                                 </div>
                                 <ul class="product-meta font-xs color-grey mt-50">
                                     <li class="mb-5">Stock Code: <a href="#">FWM15VKT</a></li>
                                     <li class="mb-5">Tags: <a href="#" rel="tag"></a> <a href="#" rel="tag"><%=category.name%></a> <a href="#" rel="tag"></a> </li>
                                     <li>Availability:<span class="in-stock text-success ml-5"><%=quantity%> Items in stock</span></li>
                                 </ul>
                             </div>
                             <br><br>
                            
                            
                         </div>
                         
                     </div>
                    
                    
                 </div>
             </div>
         </div>
     </div>



    
     <div class="reviews-section">
      <h2 class="section-title">Customer Reviews</h2>
      <%if(reviewUsers.length>0){%>

      <!-- Sample Review Card -->

      <%for(let j=0;j<reviewUsers.length;j++){%>
      <div class="review-card">
        <div class="review-header">
          <img class="avatar" src="https://th.bing.com/th/id/OIP.EwG6x9w6RngqsKrPJYxULAHaHa?rs=1&pid=ImgDetMain" alt="User Avatar" />
          <div class="user-info">
            <h4 class="username"><%=reviewUsers[j].userId.fullName%></h4>
            <div class="rating">
              <!-- Stars Rating -->
              <div class="stars">
                <i class="star filled">★</i>
                <i class="star filled">★</i>
                <i class="star filled">★</i>
                <i class="star filled">★</i>
                <i class="star empty">★</i>
              </div>
              <span class="review-date">Reviewed on 2025-01-07</span>
            </div>
          </div>
        </div>
        <p class="review-text"><%=reviewUsers[j].reviewText%></p>
    
        <!-- Review Images (Optional) -->
        <div class="review-images">
          <img class="review-image" src="/uploads/re-image/<%=reviewUsers[j].image%>" alt="Review Image 1" />
        </div>
      </div>
<%}%>
      <%}else{%>
        <p style="text-align: center;">No Customer Reviews.......!!!!</p>
      <%}%>
    </div>
   
    
    
 </section>
</main>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.0/jquery.min.js"></script>
<script>
    function addToCart(productId){

$.ajax({
  url:'/addToCart',
  method:'POST',
  data:{productId:productId},
  success:(response)=>{
    //alert(response)
    if(response.status){
      
      if(response.message == "Product quantity updated in Cart"){
        Swal.fire({
        title:"Updated to Cart",
        text:'The product has been Increased by 1 to your Cart',
       //text:response.cartLength,
        icon:'success',
        timer:2000
      })
      }else{
        Swal.fire({
        title:"Added to Cart",
        text:'The product has been added to your Cart',
       //text:response.cartLength,
        icon:'success',
        timer:2000
      })
      }
      
    }else {
      Swal.fire({
        title:"Already in Cart",
        text:response.message,
        icon:'info',
        timer:2000
      })
    }  if(response.cartLength) {
      req.session.cartLength = response.cartLength
    }
  },
  error:(error)=>{
    Swal.fire({
      title:'Error',
      text:"There was an error adding the product to your cart",
      icon:'error',
      timer:2000
    })
  }
})
}

function addToWishlist(productId){

$.ajax({
  url:'/addToWishlist',
  method:'POST',
  data:{productId:productId},
  success:(response)=>{
    if(response.status){
      Swal.fire({
        title:"Added to Wishlist",
        text:'The product has been added to your wishlist',
        icon:'success',
        timer:2000
      })
    }else {
      Swal.fire({
        title:"Already in wishlist",
        text:response.message,
        icon:'info',
        timer:2000
      })
    }
  },
  error:(error)=>{
    Swal.fire({
      title:'Error',
      text:"There was an error adding the product to your wishlist",
      icon:'error',
      timer:2000
    })
  }
})
}


</script>
<%- include("../../views/partials/user/footer") %>



